{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/jaylin/Documents/xspace/xspace-web-demos/sharedCoffee/packages/blaze/dombackend.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"packages/blaze/dombackend.js","filename":"/Users/jaylin/Documents/xspace/xspace-web-demos/sharedCoffee/packages/blaze/dombackend.js","passPerPreset":false,"envName":"development","cwd":"/Users/jaylin/Documents/xspace/xspace-web-demos/sharedCoffee","root":"/Users/jaylin/Documents/xspace/xspace-web-demos/sharedCoffee","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/jaylin/Documents/xspace/xspace-web-demos/sharedCoffee/packages/blaze/dombackend.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/blaze/dombackend.js"}},"code":"var DOMBackend = {};\nBlaze._DOMBackend = DOMBackend;\nvar $jq = typeof jQuery !== 'undefined' ? jQuery : typeof Package !== 'undefined' ? Package.jquery && Package.jquery.jQuery : null;\nif (!$jq) throw new Error(\"jQuery not found\");\nDOMBackend._$jq = $jq;\n\nDOMBackend.parseHTML = function (html) {\n  // Return an array of nodes.\n  //\n  // jQuery does fancy stuff like creating an appropriate\n  // container element and setting innerHTML on it, as well\n  // as working around various IE quirks.\n  return $jq.parseHTML(html) || [];\n};\n\nDOMBackend.Events = {\n  // `selector` is non-null.  `type` is one type (but\n  // may be in backend-specific form, e.g. have namespaces).\n  // Order fired must be order bound.\n  delegateEvents: function (elem, type, selector, handler) {\n    $jq(elem).on(type, selector, handler);\n  },\n  undelegateEvents: function (elem, type, handler) {\n    $jq(elem).off(type, '**', handler);\n  },\n  bindEventCapturer: function (elem, type, selector, handler) {\n    var $elem = $jq(elem);\n\n    var wrapper = function (event) {\n      event = $jq.event.fix(event);\n      event.currentTarget = event.target; // Note: It might improve jQuery interop if we called into jQuery\n      // here somehow.  Since we don't use jQuery to dispatch the event,\n      // we don't fire any of jQuery's event hooks or anything.  However,\n      // since jQuery can't bind capturing handlers, it's not clear\n      // where we would hook in.  Internal jQuery functions like `dispatch`\n      // are too high-level.\n\n      var $target = $jq(event.currentTarget);\n      if ($target.is($elem.find(selector))) handler.call(elem, event);\n    };\n\n    handler._meteorui_wrapper = wrapper;\n    type = DOMBackend.Events.parseEventType(type); // add *capturing* event listener\n\n    elem.addEventListener(type, wrapper, true);\n  },\n  unbindEventCapturer: function (elem, type, handler) {\n    type = DOMBackend.Events.parseEventType(type);\n    elem.removeEventListener(type, handler._meteorui_wrapper, true);\n  },\n  parseEventType: function (type) {\n    // strip off namespaces\n    var dotLoc = type.indexOf('.');\n    if (dotLoc >= 0) return type.slice(0, dotLoc);\n    return type;\n  }\n}; ///// Removal detection and interoperability.\n// For an explanation of this technique, see:\n// http://bugs.jquery.com/ticket/12213#comment:23 .\n//\n// In short, an element is considered \"removed\" when jQuery\n// cleans up its *private* userdata on the element,\n// which we can detect using a custom event with a teardown\n// hook.\n\nvar NOOP = function () {}; // Circular doubly-linked list\n\n\nvar TeardownCallback = function (func) {\n  this.next = this;\n  this.prev = this;\n  this.func = func;\n}; // Insert newElt before oldElt in the circular list\n\n\nTeardownCallback.prototype.linkBefore = function (oldElt) {\n  this.prev = oldElt.prev;\n  this.next = oldElt;\n  oldElt.prev.next = this;\n  oldElt.prev = this;\n};\n\nTeardownCallback.prototype.unlink = function () {\n  this.prev.next = this.next;\n  this.next.prev = this.prev;\n};\n\nTeardownCallback.prototype.go = function () {\n  var func = this.func;\n  func && func();\n};\n\nTeardownCallback.prototype.stop = TeardownCallback.prototype.unlink;\nDOMBackend.Teardown = {\n  _JQUERY_EVENT_NAME: 'blaze_teardown_watcher',\n  _CB_PROP: '$blaze_teardown_callbacks',\n  // Registers a callback function to be called when the given element or\n  // one of its ancestors is removed from the DOM via the backend library.\n  // The callback function is called at most once, and it receives the element\n  // in question as an argument.\n  onElementTeardown: function (elem, func) {\n    var elt = new TeardownCallback(func);\n    var propName = DOMBackend.Teardown._CB_PROP;\n\n    if (!elem[propName]) {\n      // create an empty node that is never unlinked\n      elem[propName] = new TeardownCallback(); // Set up the event, only the first time.\n\n      $jq(elem).on(DOMBackend.Teardown._JQUERY_EVENT_NAME, NOOP);\n    }\n\n    elt.linkBefore(elem[propName]);\n    return elt; // so caller can call stop()\n  },\n  // Recursively call all teardown hooks, in the backend and registered\n  // through DOMBackend.onElementTeardown.\n  tearDownElement: function (elem) {\n    var elems = []; // Array.prototype.slice.call doesn't work when given a NodeList in\n    // IE8 (\"JScript object expected\").\n\n    var nodeList = elem.getElementsByTagName('*');\n\n    for (var i = 0; i < nodeList.length; i++) {\n      elems.push(nodeList[i]);\n    }\n\n    elems.push(elem);\n    $jq.cleanData(elems);\n  }\n};\n$jq.event.special[DOMBackend.Teardown._JQUERY_EVENT_NAME] = {\n  setup: function () {// This \"setup\" callback is important even though it is empty!\n    // Without it, jQuery will call addEventListener, which is a\n    // performance hit, especially with Chrome's async stack trace\n    // feature enabled.\n  },\n  teardown: function () {\n    var elem = this;\n    var callbacks = elem[DOMBackend.Teardown._CB_PROP];\n\n    if (callbacks) {\n      var elt = callbacks.next;\n\n      while (elt !== callbacks) {\n        elt.go();\n        elt = elt.next;\n      }\n\n      callbacks.go();\n      elem[DOMBackend.Teardown._CB_PROP] = null;\n    }\n  }\n}; // Must use jQuery semantics for `context`, not\n// querySelectorAll's.  In other words, all the parts\n// of `selector` must be found under `context`.\n\nDOMBackend.findBySelector = function (selector, context) {\n  return $jq(selector, context);\n};","map":{"version":3,"sources":["packages/blaze/dombackend.js"],"names":["DOMBackend","Blaze","_DOMBackend","$jq","jQuery","Package","jquery","Error","_$jq","parseHTML","html","Events","delegateEvents","elem","type","selector","handler","on","undelegateEvents","off","bindEventCapturer","$elem","wrapper","event","fix","currentTarget","target","$target","is","find","call","_meteorui_wrapper","parseEventType","addEventListener","unbindEventCapturer","removeEventListener","dotLoc","indexOf","slice","NOOP","TeardownCallback","func","next","prev","prototype","linkBefore","oldElt","unlink","go","stop","Teardown","_JQUERY_EVENT_NAME","_CB_PROP","onElementTeardown","elt","propName","tearDownElement","elems","nodeList","getElementsByTagName","i","length","push","cleanData","special","setup","teardown","callbacks","findBySelector","context"],"mappings":"AAAA,IAAIA,UAAU,GAAG,EAAjB;AACAC,KAAK,CAACC,WAAN,GAAoBF,UAApB;AAEA,IAAIG,GAAG,GAAI,OAAOC,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GACC,OAAOC,OAAP,KAAmB,WAAnB,GACAA,OAAO,CAACC,MAAR,IAAkBD,OAAO,CAACC,MAAR,CAAeF,MADjC,GAC0C,IAFtD;AAGA,IAAI,CAAED,GAAN,EACE,MAAM,IAAII,KAAJ,CAAU,kBAAV,CAAN;AAEFP,UAAU,CAACQ,IAAX,GAAkBL,GAAlB;;AAEAH,UAAU,CAACS,SAAX,GAAuB,UAAUC,IAAV,EAAgB;AACrC;AACA;AACA;AACA;AACA;AACA,SAAOP,GAAG,CAACM,SAAJ,CAAcC,IAAd,KAAuB,EAA9B;AACD,CAPD;;AASAV,UAAU,CAACW,MAAX,GAAoB;AAClB;AACA;AACA;AACAC,EAAAA,cAAc,EAAE,UAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,QAAtB,EAAgCC,OAAhC,EAAyC;AACvDb,IAAAA,GAAG,CAACU,IAAD,CAAH,CAAUI,EAAV,CAAaH,IAAb,EAAmBC,QAAnB,EAA6BC,OAA7B;AACD,GANiB;AAQlBE,EAAAA,gBAAgB,EAAE,UAAUL,IAAV,EAAgBC,IAAhB,EAAsBE,OAAtB,EAA+B;AAC/Cb,IAAAA,GAAG,CAACU,IAAD,CAAH,CAAUM,GAAV,CAAcL,IAAd,EAAoB,IAApB,EAA0BE,OAA1B;AACD,GAViB;AAYlBI,EAAAA,iBAAiB,EAAE,UAAUP,IAAV,EAAgBC,IAAhB,EAAsBC,QAAtB,EAAgCC,OAAhC,EAAyC;AAC1D,QAAIK,KAAK,GAAGlB,GAAG,CAACU,IAAD,CAAf;;AAEA,QAAIS,OAAO,GAAG,UAAUC,KAAV,EAAiB;AAC7BA,MAAAA,KAAK,GAAGpB,GAAG,CAACoB,KAAJ,CAAUC,GAAV,CAAcD,KAAd,CAAR;AACAA,MAAAA,KAAK,CAACE,aAAN,GAAsBF,KAAK,CAACG,MAA5B,CAF6B,CAI7B;AACA;AACA;AACA;AACA;AACA;;AACA,UAAIC,OAAO,GAAGxB,GAAG,CAACoB,KAAK,CAACE,aAAP,CAAjB;AACA,UAAIE,OAAO,CAACC,EAAR,CAAWP,KAAK,CAACQ,IAAN,CAAWd,QAAX,CAAX,CAAJ,EACEC,OAAO,CAACc,IAAR,CAAajB,IAAb,EAAmBU,KAAnB;AACH,KAbD;;AAeAP,IAAAA,OAAO,CAACe,iBAAR,GAA4BT,OAA5B;AAEAR,IAAAA,IAAI,GAAGd,UAAU,CAACW,MAAX,CAAkBqB,cAAlB,CAAiClB,IAAjC,CAAP,CApB0D,CAqB1D;;AACAD,IAAAA,IAAI,CAACoB,gBAAL,CAAsBnB,IAAtB,EAA4BQ,OAA5B,EAAqC,IAArC;AACD,GAnCiB;AAqClBY,EAAAA,mBAAmB,EAAE,UAAUrB,IAAV,EAAgBC,IAAhB,EAAsBE,OAAtB,EAA+B;AAClDF,IAAAA,IAAI,GAAGd,UAAU,CAACW,MAAX,CAAkBqB,cAAlB,CAAiClB,IAAjC,CAAP;AACAD,IAAAA,IAAI,CAACsB,mBAAL,CAAyBrB,IAAzB,EAA+BE,OAAO,CAACe,iBAAvC,EAA0D,IAA1D;AACD,GAxCiB;AA0ClBC,EAAAA,cAAc,EAAE,UAAUlB,IAAV,EAAgB;AAC9B;AACA,QAAIsB,MAAM,GAAGtB,IAAI,CAACuB,OAAL,CAAa,GAAb,CAAb;AACA,QAAID,MAAM,IAAI,CAAd,EACE,OAAOtB,IAAI,CAACwB,KAAL,CAAW,CAAX,EAAcF,MAAd,CAAP;AACF,WAAOtB,IAAP;AACD;AAhDiB,CAApB,C,CAoDA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIyB,IAAI,GAAG,YAAY,CAAE,CAAzB,C,CAEA;;;AACA,IAAIC,gBAAgB,GAAG,UAAUC,IAAV,EAAgB;AACrC,OAAKC,IAAL,GAAY,IAAZ;AACA,OAAKC,IAAL,GAAY,IAAZ;AACA,OAAKF,IAAL,GAAYA,IAAZ;AACD,CAJD,C,CAMA;;;AACAD,gBAAgB,CAACI,SAAjB,CAA2BC,UAA3B,GAAwC,UAASC,MAAT,EAAiB;AACvD,OAAKH,IAAL,GAAYG,MAAM,CAACH,IAAnB;AACA,OAAKD,IAAL,GAAYI,MAAZ;AACAA,EAAAA,MAAM,CAACH,IAAP,CAAYD,IAAZ,GAAmB,IAAnB;AACAI,EAAAA,MAAM,CAACH,IAAP,GAAc,IAAd;AACD,CALD;;AAOAH,gBAAgB,CAACI,SAAjB,CAA2BG,MAA3B,GAAoC,YAAY;AAC9C,OAAKJ,IAAL,CAAUD,IAAV,GAAiB,KAAKA,IAAtB;AACA,OAAKA,IAAL,CAAUC,IAAV,GAAiB,KAAKA,IAAtB;AACD,CAHD;;AAKAH,gBAAgB,CAACI,SAAjB,CAA2BI,EAA3B,GAAgC,YAAY;AAC1C,MAAIP,IAAI,GAAG,KAAKA,IAAhB;AACAA,EAAAA,IAAI,IAAIA,IAAI,EAAZ;AACD,CAHD;;AAKAD,gBAAgB,CAACI,SAAjB,CAA2BK,IAA3B,GAAkCT,gBAAgB,CAACI,SAAjB,CAA2BG,MAA7D;AAEA/C,UAAU,CAACkD,QAAX,GAAsB;AACpBC,EAAAA,kBAAkB,EAAE,wBADA;AAEpBC,EAAAA,QAAQ,EAAE,2BAFU;AAGpB;AACA;AACA;AACA;AACAC,EAAAA,iBAAiB,EAAE,UAAUxC,IAAV,EAAgB4B,IAAhB,EAAsB;AACvC,QAAIa,GAAG,GAAG,IAAId,gBAAJ,CAAqBC,IAArB,CAAV;AAEA,QAAIc,QAAQ,GAAGvD,UAAU,CAACkD,QAAX,CAAoBE,QAAnC;;AACA,QAAI,CAAEvC,IAAI,CAAC0C,QAAD,CAAV,EAAsB;AACpB;AACA1C,MAAAA,IAAI,CAAC0C,QAAD,CAAJ,GAAiB,IAAIf,gBAAJ,EAAjB,CAFoB,CAIpB;;AACArC,MAAAA,GAAG,CAACU,IAAD,CAAH,CAAUI,EAAV,CAAajB,UAAU,CAACkD,QAAX,CAAoBC,kBAAjC,EAAqDZ,IAArD;AACD;;AAEDe,IAAAA,GAAG,CAACT,UAAJ,CAAehC,IAAI,CAAC0C,QAAD,CAAnB;AAEA,WAAOD,GAAP,CAduC,CAc3B;AACb,GAtBmB;AAuBpB;AACA;AACAE,EAAAA,eAAe,EAAE,UAAU3C,IAAV,EAAgB;AAC/B,QAAI4C,KAAK,GAAG,EAAZ,CAD+B,CAE/B;AACA;;AACA,QAAIC,QAAQ,GAAG7C,IAAI,CAAC8C,oBAAL,CAA0B,GAA1B,CAAf;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAACG,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxCH,MAAAA,KAAK,CAACK,IAAN,CAAWJ,QAAQ,CAACE,CAAD,CAAnB;AACD;;AACDH,IAAAA,KAAK,CAACK,IAAN,CAAWjD,IAAX;AACAV,IAAAA,GAAG,CAAC4D,SAAJ,CAAcN,KAAd;AACD;AAnCmB,CAAtB;AAsCAtD,GAAG,CAACoB,KAAJ,CAAUyC,OAAV,CAAkBhE,UAAU,CAACkD,QAAX,CAAoBC,kBAAtC,IAA4D;AAC1Dc,EAAAA,KAAK,EAAE,YAAY,CACjB;AACA;AACA;AACA;AACD,GANyD;AAO1DC,EAAAA,QAAQ,EAAE,YAAW;AACnB,QAAIrD,IAAI,GAAG,IAAX;AACA,QAAIsD,SAAS,GAAGtD,IAAI,CAACb,UAAU,CAACkD,QAAX,CAAoBE,QAArB,CAApB;;AACA,QAAIe,SAAJ,EAAe;AACb,UAAIb,GAAG,GAAGa,SAAS,CAACzB,IAApB;;AACA,aAAOY,GAAG,KAAKa,SAAf,EAA0B;AACxBb,QAAAA,GAAG,CAACN,EAAJ;AACAM,QAAAA,GAAG,GAAGA,GAAG,CAACZ,IAAV;AACD;;AACDyB,MAAAA,SAAS,CAACnB,EAAV;AAEAnC,MAAAA,IAAI,CAACb,UAAU,CAACkD,QAAX,CAAoBE,QAArB,CAAJ,GAAqC,IAArC;AACD;AACF;AApByD,CAA5D,C,CAwBA;AACA;AACA;;AACApD,UAAU,CAACoE,cAAX,GAA4B,UAAUrD,QAAV,EAAoBsD,OAApB,EAA6B;AACvD,SAAOlE,GAAG,CAACY,QAAD,EAAWsD,OAAX,CAAV;AACD,CAFD","sourcesContent":["var DOMBackend = {};\nBlaze._DOMBackend = DOMBackend;\n\nvar $jq = (typeof jQuery !== 'undefined' ? jQuery :\n           (typeof Package !== 'undefined' ?\n            Package.jquery && Package.jquery.jQuery : null));\nif (! $jq)\n  throw new Error(\"jQuery not found\");\n\nDOMBackend._$jq = $jq;\n\nDOMBackend.parseHTML = function (html) {\n  // Return an array of nodes.\n  //\n  // jQuery does fancy stuff like creating an appropriate\n  // container element and setting innerHTML on it, as well\n  // as working around various IE quirks.\n  return $jq.parseHTML(html) || [];\n};\n\nDOMBackend.Events = {\n  // `selector` is non-null.  `type` is one type (but\n  // may be in backend-specific form, e.g. have namespaces).\n  // Order fired must be order bound.\n  delegateEvents: function (elem, type, selector, handler) {\n    $jq(elem).on(type, selector, handler);\n  },\n\n  undelegateEvents: function (elem, type, handler) {\n    $jq(elem).off(type, '**', handler);\n  },\n\n  bindEventCapturer: function (elem, type, selector, handler) {\n    var $elem = $jq(elem);\n\n    var wrapper = function (event) {\n      event = $jq.event.fix(event);\n      event.currentTarget = event.target;\n\n      // Note: It might improve jQuery interop if we called into jQuery\n      // here somehow.  Since we don't use jQuery to dispatch the event,\n      // we don't fire any of jQuery's event hooks or anything.  However,\n      // since jQuery can't bind capturing handlers, it's not clear\n      // where we would hook in.  Internal jQuery functions like `dispatch`\n      // are too high-level.\n      var $target = $jq(event.currentTarget);\n      if ($target.is($elem.find(selector)))\n        handler.call(elem, event);\n    };\n\n    handler._meteorui_wrapper = wrapper;\n\n    type = DOMBackend.Events.parseEventType(type);\n    // add *capturing* event listener\n    elem.addEventListener(type, wrapper, true);\n  },\n\n  unbindEventCapturer: function (elem, type, handler) {\n    type = DOMBackend.Events.parseEventType(type);\n    elem.removeEventListener(type, handler._meteorui_wrapper, true);\n  },\n\n  parseEventType: function (type) {\n    // strip off namespaces\n    var dotLoc = type.indexOf('.');\n    if (dotLoc >= 0)\n      return type.slice(0, dotLoc);\n    return type;\n  }\n};\n\n\n///// Removal detection and interoperability.\n\n// For an explanation of this technique, see:\n// http://bugs.jquery.com/ticket/12213#comment:23 .\n//\n// In short, an element is considered \"removed\" when jQuery\n// cleans up its *private* userdata on the element,\n// which we can detect using a custom event with a teardown\n// hook.\n\nvar NOOP = function () {};\n\n// Circular doubly-linked list\nvar TeardownCallback = function (func) {\n  this.next = this;\n  this.prev = this;\n  this.func = func;\n};\n\n// Insert newElt before oldElt in the circular list\nTeardownCallback.prototype.linkBefore = function(oldElt) {\n  this.prev = oldElt.prev;\n  this.next = oldElt;\n  oldElt.prev.next = this;\n  oldElt.prev = this;\n};\n\nTeardownCallback.prototype.unlink = function () {\n  this.prev.next = this.next;\n  this.next.prev = this.prev;\n};\n\nTeardownCallback.prototype.go = function () {\n  var func = this.func;\n  func && func();\n};\n\nTeardownCallback.prototype.stop = TeardownCallback.prototype.unlink;\n\nDOMBackend.Teardown = {\n  _JQUERY_EVENT_NAME: 'blaze_teardown_watcher',\n  _CB_PROP: '$blaze_teardown_callbacks',\n  // Registers a callback function to be called when the given element or\n  // one of its ancestors is removed from the DOM via the backend library.\n  // The callback function is called at most once, and it receives the element\n  // in question as an argument.\n  onElementTeardown: function (elem, func) {\n    var elt = new TeardownCallback(func);\n\n    var propName = DOMBackend.Teardown._CB_PROP;\n    if (! elem[propName]) {\n      // create an empty node that is never unlinked\n      elem[propName] = new TeardownCallback;\n\n      // Set up the event, only the first time.\n      $jq(elem).on(DOMBackend.Teardown._JQUERY_EVENT_NAME, NOOP);\n    }\n\n    elt.linkBefore(elem[propName]);\n\n    return elt; // so caller can call stop()\n  },\n  // Recursively call all teardown hooks, in the backend and registered\n  // through DOMBackend.onElementTeardown.\n  tearDownElement: function (elem) {\n    var elems = [];\n    // Array.prototype.slice.call doesn't work when given a NodeList in\n    // IE8 (\"JScript object expected\").\n    var nodeList = elem.getElementsByTagName('*');\n    for (var i = 0; i < nodeList.length; i++) {\n      elems.push(nodeList[i]);\n    }\n    elems.push(elem);\n    $jq.cleanData(elems);\n  }\n};\n\n$jq.event.special[DOMBackend.Teardown._JQUERY_EVENT_NAME] = {\n  setup: function () {\n    // This \"setup\" callback is important even though it is empty!\n    // Without it, jQuery will call addEventListener, which is a\n    // performance hit, especially with Chrome's async stack trace\n    // feature enabled.\n  },\n  teardown: function() {\n    var elem = this;\n    var callbacks = elem[DOMBackend.Teardown._CB_PROP];\n    if (callbacks) {\n      var elt = callbacks.next;\n      while (elt !== callbacks) {\n        elt.go();\n        elt = elt.next;\n      }\n      callbacks.go();\n\n      elem[DOMBackend.Teardown._CB_PROP] = null;\n    }\n  }\n};\n\n\n// Must use jQuery semantics for `context`, not\n// querySelectorAll's.  In other words, all the parts\n// of `selector` must be found under `context`.\nDOMBackend.findBySelector = function (selector, context) {\n  return $jq(selector, context);\n};\n"]},"sourceType":"module","hash":"e238c0e443ea19930a28dec730f40e77991d5dbf"}
